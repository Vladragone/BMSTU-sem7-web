<div class="rating-page">
  <div *ngIf="ratingData as data">
    <h2>Топ 3 игроков (сортировка: {{ data.sortBy === 'points' ? 'по очкам' : 'по числу игр' }})</h2>

    <table>
      <thead>
        <tr>
          <th>Позиция</th>
          <th>Пользователь</th>
          <th>Очки</th>
          <th>Игры</th>
          <th>Дата регистрации</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let profile of data.top; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ profile.user?.username }}</td>
          <td>{{ profile.score }}</td>
          <td>{{ profile.gameNum }}</td>
          <td>{{ profile.regDate | date:'shortDate' }}</td>
        </tr>
      </tbody>
    </table>

    <p>Ваш ранг: {{ data.yourRank }}</p>

    <div class="sorting">
      <label for="sort">Сортировать:</label>
      <div class="switch-container" (click)="onSortChange()">
        <div class="switch" [class.active]="sortBy === 'points'">
          <div class="switch-button"></div>
        </div>
      </div>
      <span class="sort-label">{{ sortBy === 'points' ? 'По очкам' : 'По играм' }}</span>
    </div>

    <div class="profile-buttons">
      <button class="start-game-btn" (click)="startGame()">Начать игру</button>
      <button class="rating-btn" (click)="goToProfile()">Профиль</button>
      <button class="logout-btn" (click)="logout()">Выйти</button>
    </div>
  </div>

  <div *ngIf="!ratingData">
    Загрузка рейтинга...
  </div>
</div>
<button class="help-button" (click)="changeImg()">?</button>

